<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Djangae by potatolondon</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Djangae</h1>
      <h2 class="project-tagline">The best way to run Django on Google App Engine</h2>
      <a href="https://github.com/potatolondon/djangae" class="btn">View on GitHub</a>
      <a href="https://github.com/potatolondon/djangae/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/potatolondon/djangae/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="djangae" class="anchor" href="#djangae" aria-hidden="true"><span class="octicon octicon-link"></span></a>Djangae</h1>

<p><a href="https://gitter.im/potatolondon/djangae?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/potatolondon/djangae"></a></p>

<p><a href="http://travis-ci.org/potatolondon/djangae?branch=master"><img src="https://secure.travis-ci.org/potatolondon/djangae.png?branch=master" alt="build-status-image"></a></p>

<p>The best way to run Django on Google App Engine.</p>

<p>Djangae (djan-gee) is a Django app that allows you to run Django applications on Google App Engine, including (if you
want to) using Django's models with the App Engine Datastore as the underlying database.</p>

<p>Documentation: <a href="http://djangae.readthedocs.org/">http://djangae.readthedocs.org/</a></p>

<p>Google Group: <a href="https://groups.google.com/forum/#!forum/djangae-users">https://groups.google.com/forum/#!forum/djangae-users</a></p>

<p>Website: <a href="https://potatolondon.github.io/djangae/">https://potatolondon.github.io/djangae/</a></p>

<p>GitHub: <a href="https://github.com/potatolondon/djangae">https://github.com/potatolondon/djangae</a></p>

<p><strong>Note: Djangae is under heavy development, stability is not guaranteed. A 1.0 release will happen when it's ready</strong></p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul>
<li>A WSGI middleware that provides a clean way via which your Django app is plugged into App Engine.</li>
<li>A hook to allow App Engine's deferred tasks and mapreduce handlers to run through the same environment.</li>
<li>The ability to use the Datastore as the database for Django's models.  See <strong>The Database Backend</strong> for details.
You can also use App Engine's NDB, or you can use Google Cloud SQL (via the standard django MySQL backend) instead of
or along side the Datastore. Or use all 3!</li>
<li>
<code>djangae.contrib.gauth</code> which provides user models (both concrete and extendable abstract versions), an auth backend, and a middleware; which allow you to authenticate users using the App Engine's built-in Google Accounts authentication, and also allow you to use Django's permissions system on the Datastore (i.e. without being caught out by the Many-To-Many relationships).</li>
<li>A <code>runserver</code> command which fires up the App Engine SDK to serve your app (while still using Django's code reloading).</li>
<li>The ability to run management commands locally or on the remote App Engine Datastore.</li>
<li>A <code>shell</code> command that correctly sets up the environment/database. (Note, we should support this set up for any
custom commands as well, see TODO.md).</li>
</ul>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p><a href="http://djangae.readthedocs.org/">http://djangae.readthedocs.org/</a></p>

<h2>
<a id="supported-django-versions" class="anchor" href="#supported-django-versions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported Django Versions</h2>

<p>The intention is always to support the last two versions of Django, although older versions may work. Currently
Django 1.6 and 1.7 are supported. 1.8 support will come soon after it's released.</p>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<p><strong>If you just want to get started on a fresh Django project, take a look at <a href="https://github.com/potatolondon/djangae-scaffold">djangae-scaffold</a></strong></p>

<ul>
<li>Create a Django project, add app.yaml to the root. Make sure Django 1.6+ is in your project and importable</li>
<li>Install Djangae into your project, make sure it's importable (you'll likely need to manipulate the path in manage.py and wsgi.py)</li>
<li>Add djangae to <code>INSTALLED_APPS</code>.</li>
<li>At the top of your settings, insert the following line: <code>from djangae.settings_base import *</code> - this sets up some
default settings.</li>
<li>
<p>In app.yaml add the following handlers:</p>

<div class="highlight highlight-yml"><pre><span class="pl-s">- <span class="pl-ent">url:</span> <span class="pl-s">/_ah/(mapreduce|queue|warmup).*</span></span>
  <span class="pl-s"><span class="pl-ent">script:</span> <span class="pl-s">YOUR_DJANGO_APP.wsgi.application</span></span>
  <span class="pl-s"><span class="pl-ent">login:</span> <span class="pl-s">admin</span></span>

<span class="pl-s">- <span class="pl-ent">url:</span> <span class="pl-s">/.*</span></span>
  <span class="pl-s"><span class="pl-ent">script:</span> <span class="pl-s">YOUR_DJANGO_APP.wsgi.application</span></span></pre></div>
</li>
<li>
<p>Make your manage.py look something like this:</p>

<div class="highlight highlight-python"><pre><span class="pl-k">if</span> <span class="pl-c1">__name__</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">"</span>__main__<span class="pl-pds">"</span></span>:
    os.environ.setdefault(<span class="pl-s"><span class="pl-pds">"</span>DJANGO_SETTINGS_MODULE<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>myapp.settings<span class="pl-pds">"</span></span>)

    <span class="pl-k">from</span> djangae.core.management <span class="pl-k">import</span> execute_from_command_line

    execute_from_command_line(sys.argv)</pre></div>
</li>
<li>
<p>Use the Djangae WSGI handler in your wsgi.py, something like</p>

<div class="highlight highlight-python"><pre><span class="pl-k">from</span> django.core.wsgi <span class="pl-k">import</span> get_wsgi_application

<span class="pl-k">from</span> djangae.wsgi <span class="pl-k">import</span> DjangaeApplication

application <span class="pl-k">=</span> DjangaeApplication(get_wsgi_application())</pre></div>
</li>
<li><p>Add the following to your URL handler: <code>url(r'^_ah/', include('djangae.urls'))</code></p></li>
<li><p>It is recommended that for improved security you add <code>djangae.contrib.security.middleware.AppEngineSecurityMiddleware</code> as the first
of your middleware classes. This middleware patches a number of insecure parts of the Python and App Engine libraries and warns if your
Django settings aren't as secure as they could be.</p></li>
<li>If you wish to use the App Engine's Google Accounts-based authentication to authenticate your users, and/or you wish to use Django's permissions system with the Datastore as you DB, then see the section on <strong>Authentication</strong>.</li>
<li><strong>It is highly recommended that you read the section on <a href="#unique-constraint-checking">Unique Constraints</a></strong></li>
</ul>

<h2>
<a id="deployment" class="anchor" href="#deployment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment</h2>

<p>Create a Google App Engine project. Edit <code>app.yaml</code> and change <code>application: [...]</code> to <code>application: your-app-id</code>. Then run:</p>

<pre><code>$ appcfg.py update ./
</code></pre>

<p>If you have two-factor authentication enabled in your Google account, run:</p>

<pre><code>$ appcfg.py --oauth2 update ./
</code></pre>

<h2>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h2>

<p>For running the tests, (the first time only) you just need to run:</p>

<pre><code>$ ./runtests.sh
</code></pre>

<p>This will download the App Engine SDK, pip install a bunch of stuff locally, download the Django tests and run them. If you want to run the
tests on a specific Django version, simply do:</p>

<pre><code>$ DJANGO_VERSION=1.8 ./runtests.sh
</code></pre>

<p>Currently the default is 1.6. TravisCI runs on 1.6 and 1.7 currently, and 1.8 in the 1-8-support branch.</p>

<p>After you have run the tests once, you can do:</p>

<pre><code>$ cd testapp
./runtests.sh
</code></pre>

<p>This will avoid the re-downloading of the SDK and libraries.  Note that if you want to switch Django version then you need to use the <code>runtests.sh</code> command in the parent directory again.</p>

<p>You can run specific tests in the usual way by doing:</p>

<pre><code>./runtests.sh some_app.SomeTestCase.some_test_method
</code></pre>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>Contributions are accepted via pull request and will be reviewed as soon as possible. If you have access to master, please do not commit directly! Pull requests only!</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/potatolondon/djangae">Djangae</a> is maintained by <a href="https://github.com/potatolondon">potatolondon</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-40029116-11");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>

